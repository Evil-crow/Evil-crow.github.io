<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>ShellScript(一) | Road to Coding</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ShellScript(一)</h1><a id="logo" href="/.">Road to Coding</a><p class="description">只要那一抹笑容尚存，我便心无旁骛。</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">ShellScript(一)</h1><div class="post-meta">Dec 5, 2017<span> | </span><span class="category"><a href="/categories/ShellScript/">ShellScript</a></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#shell脚本的准备"><span class="toc-number">1.</span> <span class="toc-text">shell脚本的准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shell脚本的排错"><span class="toc-number">2.</span> <span class="toc-text">shell脚本的排错</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shell的内建命令"><span class="toc-number">3.</span> <span class="toc-text">shell的内建命令</span></a></li></ol></div></div><div class="post-content"><p><em>shell脚本作为必须要掌握的内容,已经被扔了好久了,没去学习了</em></p>
<p><em>现在趁此机会,好好学习一波</em></p>
<p><em>同时,也改变一下,学习语言时的博客风格</em></p>
<p><em>捡有意义,值得进行记录得点进行记录,不然最后博客写的就像,抄书一样…</em></p>
<h2 id="shell脚本的准备"><a href="#shell脚本的准备" class="headerlink" title="shell脚本的准备"></a>shell脚本的准备</h2><p>#!/bin/bash   表示使用的解释器</p>
<p>是注释开始的标志,多写注释,便于程序的理解</p>
<p>最简单的shell脚本就是命令的罗列</p>
<p>脚本执行的两种方法:</p>
<ol>
<li><p>使用 “ bash xxx.sh “ 运行脚本 ,同理,可以使用,zsh,sh,之类的解释器都可以</p>
</li>
<li><p>“ chmod + x xxx.sh “ 加上执行的权限,然后,./xx.sh运行脚本 </p>
</li>
<li><p>将此脚本放在任何系统path下,都有可以变成默认的系统命令,可以直接进行使用</p>
</li>
</ol>
<h2 id="shell脚本的排错"><a href="#shell脚本的排错" class="headerlink" title="shell脚本的排错"></a>shell脚本的排错</h2><p>有以下三种方法:</p>
<ol>
<li><p>使用echo进行排错</p>
<p> 此方法类似于C语言中的printf排错法</p>
</li>
<li><p>使用 bash -x 选项</p>
<p> 这样可以打印出每一步的结果,可以查看执行的代码,从而进行变量的排错</p>
</li>
<li><p>使用第三方工具,bashdb ,类似于GDB的排错程序</p>
</li>
</ol>
<h2 id="shell的内建命令"><a href="#shell的内建命令" class="headerlink" title="shell的内建命令"></a>shell的内建命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span>, <span class="built_in">bg</span>, <span class="built_in">bind</span>, <span class="built_in">break</span>, <span class="built_in">builtin</span>, <span class="built_in">caller</span>, <span class="built_in">cd</span>, <span class="built_in">command</span>, compgen, complete, compopt, <span class="built_in">continue</span>, <span class="built_in">declare</span>, <span class="built_in">dirs</span>,  <span class="built_in">disown</span>,  <span class="built_in">echo</span>,  <span class="built_in">enable</span>,  <span class="built_in">eval</span>,  <span class="built_in">exec</span>,  <span class="built_in">exit</span>,</span><br><span class="line"><span class="built_in">export</span>,  <span class="literal">false</span>,  <span class="built_in">fc</span>, <span class="built_in">fg</span>, <span class="built_in">getopts</span>, <span class="built_in">hash</span>, <span class="built_in">help</span>, <span class="built_in">history</span>, <span class="built_in">jobs</span>, <span class="built_in">kill</span>, <span class="built_in">let</span>, <span class="built_in">local</span>, <span class="built_in">logout</span>,</span><br><span class="line"><span class="built_in">mapfile</span>, <span class="built_in">popd</span>, <span class="built_in">printf</span>, <span class="built_in">pushd</span>, <span class="built_in">pwd</span>, <span class="built_in">read</span>, <span class="built_in">readonly</span>, <span class="built_in">return</span>, <span class="built_in">set</span>, <span class="built_in">shift</span>, <span class="built_in">shopt</span>,  <span class="built_in">source</span>,</span><br><span class="line"><span class="built_in">suspend</span>, <span class="built_in">test</span>, <span class="built_in">times</span>, <span class="built_in">trap</span>, <span class="literal">true</span>, <span class="built_in">type</span>, <span class="built_in">typeset</span>, <span class="built_in">ulimit</span>, <span class="built_in">umask</span>, <span class="built_in">unalias</span>, <span class="built_in">unset</span>, <span class="built_in">wait</span> -</span><br></pre></td></tr></table></figure>
<p>这些都属于内建命令,bash-built-in</p>
<p>凡是用which命令查不到程序文件所在位置的命令都是内建命令</p>
<p>内建命令没有单独的man手册，要在man手册中查看内建命令，应该man bash-builtins</p>
<p>内建命令虽然不创建新的进程，也会有返回值，通常用0表示成功非零表示失败，可以用特殊变量$?读出</p>
<p><strong>内建命令,相当于shell的函数,并不会创建新的进程,而外建命令是新的进程</strong></p>
<p>其中一些有意思的命令:</p>
<p><strong>1. type: 查看命令是否是内建命令</strong></p>
<p><strong>2. .: 表示执行程序</strong></p>
<p><strong>3. alias: 命令别名</strong></p>
<p><strong>4. unalias:　取消命令别名</strong></p>
<p><strong>5. fg,bg,jobs: jobs查看当前任务,fg将后台任务调至前台运行,bg将任务调职前台</strong></p>
<p><strong>6. cd: 改变工作目录</strong></p>
<p><strong>7. declare,typeset: shell属于弱类型的语言,对于变量的类型界定不是很明确,</strong></p>
<p>declare,typeset效果完全相同,可以-i声明整型,-r声明只读变量</p>
<p>在这里需要分想给大家的是,shellscript写起来,和使用命令是很像的</p>
<p>比如: </p>
<p>declare -F 显示脚本中的函数名</p>
<p>declare -f 显示脚本中的函数体</p>
<p>而在bash中使用,则是显示整个系统中的函数和函数体 (在shell脚本中的)</p>
<p><strong>8. echo: 很常见的内建命令,类似于printf,可以进行信息的打印,缺省打印换行符,-n可以取消</strong></p>
<p><strong>9. break: 根据shell提示,只能用于,for,while,loop的循环中,用于跳出循环</strong></p>
<p><strong>10. continue: 同理的,跳出当前循环,进入其他层的循环</strong></p>
<p>*break,contiune,后都可以跟上数字,表示跳出指定层数的循环</p>
<p><strong>11. eval: 将其后的参数作为shell的输入,并产生新的命令</strong></p>
<p><strong>12. exec: 表示用exec后的程序进行shell的替换,在命令执行完成之后,现在的shell会被清理掉</strong></p>
<p>因为他的任务只是执行这一条命令,,,</p>
<p>为了避免这种情况,所以一般将exec的命令放到shell脚本中,exec会替换子脚本进程,而像source</p>
<p>. 之类的命令,并不会替换子进程,而是将命令放在当前的shell中执行</p>
<p><strong>13. exit: 退出shell</strong></p>
<p><strong>14. export: 使变量能够被shell识别,export属于变量输出,使得父shell中的变量能够被子shell识别</strong></p>
<p>即使得多的不同的shell,可以相互识别变量,export,我认为比较像C中的extern*</p>
<p>但是,不同的是,改变shell中的变量的值,互不影响,仅为同名的局部变量,而C中,是同一变量..</p>
<p><strong>15. kill: 这是一个相常用的命令,用于杀死进程,向内核传递一个进程号以及处理的序号</strong></p>
<p>备注:在Linux操作系统中,一般有三种进程,交互式进程,批处理进程,系统进程(包括守护进程)</p>
<p><strong>16. let: 进行整数运算的命令,同时也支持C类的运算</strong></p>
<p><strong>17. pwd: 显示当前工作目录</strong></p>
<p>同时,使用 $OLDPWD, $PWD变量可以获取当前工作目录,以及之前的工作目录变量</p>
<p><strong>18. local: 声明局部变量,仅能在函数内部使用,在外使用会爆炸</strong></p>
<p><strong>19. read: 从标准输入读取一行输入给变量,即为scanf</strong></p>
<p>read从标准输入获取到的内容默认放在 $REPLAY中,可以使用<strong> echo $REPLY </strong> 查看</p>
<p><strong>20. return: 类似于其他语言,再函数中进行返回值的传递,不使用return,默认以最后一行的状态作为返回值</strong></p>
<p>可以使用 <strong>“echo $? 查看返回值” </strong></p>
<p><strong>21. shift:　进行为位置参数的移动，类似于，argc一样，</strong></p>
<p>shell中的变量，依次记作，＄１，＄２，＄３，＄４．．＄０是脚本本身，</p>
<p>其中还有几个比较有意思的变量，＄＠／＄＊　表示所有变量，＄＃表示变量总个数</p>
<p><strong>所以，shift的作用是，进行参数的左移．</strong></p>
<p><strong>２２．　unlimit: 不做多余赘述</strong></p>
<p><strong>23. test: 用于测试expression的值，很方便</strong></p>
<p><strong>以上就是，进行shellscript脚本学习的Linux命令基础，暂时没有截图</strong></p>
<p><strong>后面关于正式的shellscript会有相关的截图来进行说明</strong></p>
<p>December 4, 2017 11:56 PM</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="http://evil-crow.github.io/2017/12/05/Important/ShellScript/sh1/" data-id="cjofklqcp003e5snrt0up5usa" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACuUlEQVR42u3awVLjMBAEUP7/p7PXrQJM94wEOTyfUhDbejpIkx59fMTX69P1/Pfv/ptf/z/h8+fDFx4eHt566M+M/TQ9/+V5hPmY8fDw8G7znoeSLPoJ6fn7yQaTjxkPDw/vfXh5ef28DeSTkt+Lh4eH9568vNjNt4pkgvDw8PDejZc/uh3ujXL5StaCh4eHF/Pa+PUdPl/p7+Hh4eGtu+p5MyyJHtoYt216fXEXHh4e3gXerHmfH67aRAxtWf/t9OHh4eFd5rXbQ9ISa0vzfPuJnoaHh4f367x9GZ0v+m3cEAW4eHh4eEd57Q/+hFHPbokvjnnh4eHhXeDlLfx8EW8PHOTB7oEOHh4eHt6a18ayySbRluM5rN7G8PDw8K7x2uZTWyjXwev6yNdHu7Ph4eHhjXizI1D5EaukxdVOZZS14OHh4R3lJQtxHu/mgOSNyXjyQBkPDw/vFG826HbOXqNrc+Dgi6wFDw8P7wJv0zabrcOnJqhugOHh4eEteLMoYcPYN72GsTIeHh7eId5mqc0PExwIXsuW2A+/GPDw8PAO8fItoY1Z82I62WyKYwR4eHh4F3h5SNG+OA8+TsXHdTCBh4eHd5Q3CyOGrynfNSvx8fDw8M7yZgHBPvbdNOGKYhoPDw/vAq/tmM0W61mc0W4G396Fh4eHd5S3CVjbe5OnJccLijACDw8P7xd5CSAvl5Nh5U8oSnM8PDy8a7z2Nfkg9gX3LKTAw8PDu8F7lVc+uHw7ydv/bQiCh4eHd4M3a+1vFuv8cz59By48PDy8ktdGtPtvbgr0ZFMpCms8PDy8BW/WOdp8p05NNpEEHh4e3p/yZiFsDt6U1z/09/Dw8PD+lLc5BNAePshL/2KHwcPDw1vz2oAgb0HlT561x34YFR4eHt4F3iwaaCeijWXzwn0Fw8PDw+t4/wAXuQMnP4WwbQAAAABJRU5ErkJggg==">分享</a><div class="tags"><a href="/tags/ShellScript/">ShellScript</a></div><div class="post-nav"><a class="pre" href="/2017/12/05/Important/ShellScript/sh2/">ShellScript(二)</a><a class="next" href="/2017/12/03/Guide/Linux/Regx/">正则表达式</a></div><div id="container"></div><link rel="stylesheet" href="/css/default.css?v=0.0.0"><script src="/js/gitment.browser.js?v=0.0.0"></script><script>var gitment = new Gitment({
  owner: 'evil-crow',
  repo: 'evil-crow.github.io',
  oauth: {
    client_id: '1c81bedb1f161c78ec76',
    client_secret: '29bf11687745096e8640698a23483cb6c643d944',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Assembly/">Assembly</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Bible/">Bible</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C-C/">C/C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Documents/">Documents</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Guide/">Guide</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Q-A/">Q&A</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/">Ruby</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SQL/">SQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ShellScript/">ShellScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Unix-Linux/">Unix/Linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Unix-Linux/Guide/">Guide</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vim/">Vim</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/CSAPP/" style="font-size: 15px;">CSAPP</a> <a href="/tags/CodeStyle/" style="font-size: 15px;">CodeStyle</a> <a href="/tags/vbird/" style="font-size: 15px;">vbird</a> <a href="/tags/GDB/" style="font-size: 15px;">GDB</a> <a href="/tags/RegExpression/" style="font-size: 15px;">RegExpression</a> <a href="/tags/LinuxC/" style="font-size: 15px;">LinuxC</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/Assembly/" style="font-size: 15px;">Assembly</a> <a href="/tags/Binuntils/" style="font-size: 15px;">Binuntils</a> <a href="/tags/EffectiveC/" style="font-size: 15px;">EffectiveC++</a> <a href="/tags/EffectiveSTL/" style="font-size: 15px;">EffectiveSTL</a> <a href="/tags/Ruby/" style="font-size: 15px;">Ruby</a> <a href="/tags/ShellScript/" style="font-size: 15px;">ShellScript</a> <a href="/tags/Syscall/" style="font-size: 15px;">Syscall</a> <a href="/tags/VimScript/" style="font-size: 15px;">VimScript</a> <a href="/tags/CTrapsAndPitfalls/" style="font-size: 15px;">CTrapsAndPitfalls</a> <a href="/tags/Expert-C-Programming/" style="font-size: 15px;">Expert_C_Programming</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/11/13/Question_Answer/github_green_point/">关于github绿点的常见问题--邮箱</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/08/Important/EffSTL/stl1/"><STL> Containers</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/09/Important/EffC++/effective5/"><星月夜> Implementations</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/27/Important/C/Expert_C_Programming/data_mem/"><咸鱼书> 运行时数据结构与内存</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/26/Important/EffC++/effective4/"><星月夜> Designs and Declarations</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/19/Important/EffC++/effective3/"><星月夜> Resource Management</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/13/Important/EffC++/effective2/"><星月夜> Constructors, Destructors, and Assignment Operators</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/07/Important/EffC++/effective1/"><星月夜> Accustoming Yourself to C++</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/08/Guide/GDB/multprocess/">GDB调试系列(一)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/31/Guide/Fedora_KDE/">Linux的常用配置</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Road to Coding.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>