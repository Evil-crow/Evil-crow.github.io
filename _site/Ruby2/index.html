<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/github.min.css"> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script> <script>hljs.initHighlightingOnLoad();</script> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>Ruby学习笔记(二) &#8211; Road to Coding</title> <meta name="description" content="只要那一抹笑容尚存, 我便心无旁骛"> <meta name="keywords" content="Ruby"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="http://localhost:4000/assets/img/logo.png"> <meta name="twitter:title" content="Ruby学习笔记(二)"> <meta name="twitter:description" content="前面都是些编程语言共同的特性,这次开始就是Ruby自己的风格了"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Ruby学习笔记(二)"> <meta property="og:description" content="前面都是些编程语言共同的特性,这次开始就是Ruby自己的风格了"> <meta property="og:url" content="http://localhost:4000/Ruby2/"> <meta property="og:site_name" content="Road to Coding"> <meta property="og:image" content="http://localhost:4000/assets/img/logo.png"> <link rel="canonical" href="http://localhost:4000/Ruby2/"> <link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Road to Coding Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css"> <!-- JS --> <script src="http://localhost:4000/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="http://localhost:4000/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="http://localhost:4000/favicon.png" /> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(http://localhost:4000/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="http://localhost:4000/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="http://localhost:4000/assets/img/logo.png" alt="Road to Coding photo" class="author-photo"> <h4>Road to Coding</h4> <p>只要那一抹笑容尚存, 我便心无旁骛</p> </li> <li><a href="http://localhost:4000/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="mailto:evilcrow486@gmail.com" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-envelope-square"></i> Email</a> </li> <li> <a href="http://github.com/Evil-crow" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul><!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="http://localhost:4000/posts/">All Posts</a></li> <li><a href="http://localhost:4000/tags/">All Tags</a></li> </ul> </li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn" style="background-color:rgba(255,255,255,0.97);"> <div class="content"> <div class="post-title "> <h1>Ruby学习笔记(二)</h1> <h4>06 Feb 2018</h4> <a class="btn zoombtn" href="http://localhost:4000/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <p><em>之前一直不清楚OOP,对OOP最深的印象就是,所有的函数直接” . “进行调用</em></p> <p><em>那么,今天就来看看所谓的”函数”,即方法的相关内容</em></p> <h2 id="一-方法">一 方法</h2> <p>什么是方法?</p> <p><strong>由对象定义的与对象有关的操作,Ruby中将对对象的操作封装成为方法</strong></p> <p>从smartalk沿承下来的一个概念:<strong>发送消息</strong></p> <p>将对象作为消息的接收者,通过调用方法的形式,将消息(方法)发送给对象,</p> <p><strong>把参数和消息一起发送给对象的过程,叫方法的调用</strong></p> <p><strong>切记: Ruby中方法的调用,可以省略括号,(必要时刻避免不必要的理解错误)</strong></p> <h3 id="1-方法的调用">&lt;1&gt; 方法的调用</h3> <p>分为以下三种:</p> <ol> <li> <p>简单方法的调用</p> </li> <li> <p>带块方法的调用</p> </li> <li> <p>运算符形式的方法调用</p> </li> </ol> <p>此处仅为了解,之后会详解三种方法调用</p> <p>注意:</p> <p><strong>1. 带块的方法,像之前说的,do ~ end 与 { ~ }可以替换,但是,do ~ end可以省略参数列表的括号</strong></p> <p><strong>反之,{ ~ }只有在没有参数时,才可以省略括号,有一个以上都不能省略括号</strong></p> <p><strong>2. 运算符形式的方法可以重定义,有的可以,有的则不行</strong></p> <h3 id="2-方法的分类">&lt;2&gt; 方法的分类</h3> <p>方法同时也可以根据接收对象来进行分类:</p> <ol> <li> <p>实例方法</p> </li> <li> <p>类方法</p> </li> <li> <p>函数式方法</p> </li> </ol> <p><strong>实例方法: 就像表面含义一样,是给类的实例对象进行调用的方法,就是常见的函数调用</strong></p> <p><strong>类方法: 给类进行使用的方法</strong></p> <p>例如,我们常见的创建对象的方法,就是类方法</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Array</span><span class="p">.</span><span class="nf">new</span>
<span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</code></pre></div></div> <p>同时,不直接对实例操作,而是通过所属的类进行属性的改变时,也使用类方法</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">File</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">old_name</span><span class="p">,</span> <span class="n">new_name</span><span class="p">)</span>
</code></pre></div></div> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#实例方法:</span>
<span class="n">filename</span> <span class="o">=</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># file = File.open(filename)</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">file</span><span class="p">.</span><span class="nf">read</span>
<span class="n">file</span><span class="p">.</span><span class="nf">close</span>

<span class="c1">#类方法:</span>
<span class="n">text</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</code></pre></div></div> <p><strong>同时,切记,类方法也可以这样调用 “::”,省得以后概念看不懂</strong></p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">text</span> <span class="o">=</span> <span class="no">File</span><span class="o">::</span><span class="n">read</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</code></pre></div></div> <p><strong>函数式方法: 没有接受者的方法即为函数式方法,(其实到后面就知道,接受者是self)</strong></p> <p><strong>叫函数式方法,是因为此类方法不关心接受者是谁,反过来,就是没有接收者的方法为函数式方法</strong></p> <blockquote> <p>另外解释一个情况: Array#new, 这是Ruby文档中对方法名的标记形式</p> </blockquote> <h2 id="二-方法的定义">二 方法的定义</h2> <p><em>上面说了这么多,也该说说方法的定义了</em></p> <h3 id="1-方法的定义">&lt;1&gt; 方法的定义</h3> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="err">方法名</span><span class="p">(</span><span class="err">参数列表</span><span class="p">)</span>
  <span class="err">进行的处理</span>
<span class="k">end</span>
</code></pre></div></div> <p><strong>方法名可有下划线,字母,数字组成,不能以数字开头</strong></p> <p>下面看几个例子:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"my name is </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre></div></div> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="nb">name</span> <span class="o">=</span> <span class="s2">"ruby"</span><span class="p">)</span>    <span class="c1"># 指定无参数时的默认值</span>
  <span class="n">pust</span> <span class="s2">"my name is </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre></div></div> <p><em>带块的方法,类方法,会在介绍了类之后进行接受到介绍</em></p> <h3 id="2-方法的返回值">&lt;2&gt; 方法的返回值</h3> <p>下面有几条方法返回值的规则:</p> <p><strong>有return时:</strong></p> <ol> <li> <p>reutrn的值即为返回值,且立刻返回</p> </li> <li> <p>return后无从参数,则返回 nil 例如print返回值就为nil</p> </li> </ol> <p><strong>无return时</strong></p> <ol> <li> <p>方法的最后一个表达式,即为返回值</p> </li> <li> <p>上一条规则不一定正确,程序流结束处为返回值,</p> </li> </ol> <h3 id="3-参数个数不确定时">&lt;3&gt; 参数个数不确定时</h3> <p>在C中,实现可变从参数,使用的便是&lt; stdarg.h &gt;中的宏,Ruby就没这么复杂了</p> <p>在参数列表中,<strong>*var(变量名)</strong>,则方法会把所有的参数封装为数组,</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">math</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
  <span class="p">[</span><span class="n">arg</span><span class="p">,</span> <span class="n">args</span><span class="p">]</span>
<span class="k">end</span>

<span class="nb">p</span> <span class="n">math</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="c1">#=&gt; [1, [2, 3, 4]]</span>
</code></pre></div></div> <p><strong>切记: 每个方法的参数列表中,不定参数列表,只能出现出现一次! ! !</strong></p> <p><strong>类似于多重赋值的用法</strong></p> <h3 id="4-关键字参数">&lt;4&gt; 关键字参数</h3> <p>之前,提到了,Ruby方法中<strong>需要参数按顺序指定类型值进行调用</strong></p> <p>所以,有了关键字参数的用法(ruby2.0的新特性)</p> <p><strong>关键字参数: 将变量名与变量值,成对的传进方法中</strong></p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">method_name</span><span class="p">(</span><span class="ss">arg1: </span><span class="n">value1</span><span class="p">,</span> <span class="ss">arg2: </span><span class="n">value2</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
  <span class="n">do_something</span>
<span class="k">end</span>
</code></pre></div></div> <p><strong>关键字从参数的好处: 参数可以不按照默认顺序调用, 而且可以省略其中的任意参数</strong></p> <p><strong>但是,将未定义的参数名传给方法时,会报错</strong></p> <p>因为上面提到了,未定义的参数名,所以我们有一个处理未定义参数名的方法: <strong>**args参数</strong></p> <p><strong>在方法定义中,使用此参数,用于回收未定义的参数名以及变量值,并以hash的形式保存</strong></p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="ss">x: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">y: </span><span class="mi">2</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
  <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">args</span><span class="p">]</span>
<span class="k">end</span>

<span class="nb">p</span> <span class="n">meth</span><span class="p">(</span><span class="ss">x: </span><span class="mi">5</span><span class="p">,</span> <span class="ss">y: </span><span class="mi">9</span><span class="p">,</span> <span class="ss">z: </span><span class="mi">0</span><span class="p">)</span> <span class="c1">#=&gt; [5, 9, {:z=&gt;0}]</span>
</code></pre></div></div> <p><strong>同时,可以直接将hash作为参数传递,会使用与关键字参数匹配的方法进行参数,变量名的核对</strong></p> <p><strong>因为,关键字参数的实现,就是参考传递hash作为参数而来的</strong></p> <p><strong>最后,建议大家,多多使用关键字参数,很方便</strong></p> <h3 id="5-小技巧">&lt;5&gt; 小技巧</h3> <h4 id="1-将数组作为参数传递">1. 将数组作为参数传递</h4> <p>之前,看到过,hash作为参数,我们也使用了,*args的形式,进行不定参数的封装</p> <p>所以,我们可以使用<strong>*args的形式</strong>,将数组作为参数传递</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
  <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span>
<span class="k">end</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="n">a</span><span class="p">)</span>
</code></pre></div></div> <p><strong>但是,数组与参数列表的数目一定要核实,相等</strong></p> <blockquote> <p>区分: *args的不同用法</p> </blockquote> <blockquote> <p>在方法调用时,*args,表示将数组中的参数一一传递</p> </blockquote> <blockquote> <p>方法定义时,*args,表示接收不定参数</p> </blockquote> <h2 id="三-聊聊ruby的格式">三 聊聊Ruby的格式</h2> <h3 id="1-换行">&lt;1&gt; 换行</h3> <p>Ruby中以一行结束作为语句结束的标识</p> <p><strong>它也可以使用 ; 作为结束的标识</strong></p> <p>一般不建议用; ,用一行结束来表示语句的结束,简洁明了</p> <h3 id="2-缩进">&lt;2&gt; 缩进</h3> <p>Ruby也有缩进,但是,使用的是软缩进(2个空格的Tab)</p> <p>同时,搭配上do ~ end使得程序结构清晰明了</p> <h3 id="3-空白">&lt;3&gt; 空白</h3> <p>Ruby中针对于空白要求比较严格</p> <p>不能乱空白</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">+</span> <span class="n">b</span>   <span class="no">O</span>
<span class="n">a</span><span class="o">+</span><span class="n">b</span>     <span class="no">O</span>
<span class="n">a</span> <span class="o">+</span><span class="n">b</span>    <span class="no">X</span>
<span class="n">a</span><span class="o">+</span> <span class="n">b</span>    <span class="no">X</span>
</code></pre></div></div> <p><strong>上面第三种写法的问题很严重,意思时,调用名为+,参为b的方法 ！！！</strong></p> <p>最后，要想写出好看，优雅的代码，离不开参考别人的代码，推荐Rails的学习！</p> <p>(当然,我离那一步还有点距离)</p> <p><em>方法很重要,定义了对象的行为,下一篇的类与模块,可以说是Ruby的精华之一了</em></p> <p>February 6, 2018 2:58 PM</p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="http://localhost:4000/tags/#Ruby" title="Pages tagged Ruby" class="tag"><span class="term">Ruby</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/Ruby2/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/Ruby2/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=http://localhost:4000/Ruby2/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="http://localhost:4000/assets/js/jquery-1.12.0.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.dlmenu.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.goup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.magnific-popup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.fitvid.min.js"></script> <script src="http://localhost:4000/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'Evilcrow'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
