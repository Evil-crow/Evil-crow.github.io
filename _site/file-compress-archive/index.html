<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/github.min.css"> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script> <script>hljs.initHighlightingOnLoad();</script> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>第十一篇 文件的打包压缩与备份 &#8211; Road to Coding</title> <meta name="description" content="只要那一抹笑容尚存, 我便心无旁骛"> <meta name="keywords" content="vbird"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="http://localhost:4000/assets/img/logo.png"> <meta name="twitter:title" content="第十一篇 文件的打包压缩与备份"> <meta name="twitter:description" content="最近的重心都放在了Linux_C编程上,也没时间仔细研读今天先来总结一下关于文件打包与压缩吧"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="第十一篇 文件的打包压缩与备份"> <meta property="og:description" content="最近的重心都放在了Linux_C编程上,也没时间仔细研读今天先来总结一下关于文件打包与压缩吧"> <meta property="og:url" content="http://localhost:4000/file-compress-archive/"> <meta property="og:site_name" content="Road to Coding"> <meta property="og:image" content="http://localhost:4000/assets/img/logo.png"> <link rel="canonical" href="http://localhost:4000/file-compress-archive/"> <link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Road to Coding Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css"> <!-- JS --> <script src="http://localhost:4000/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="http://localhost:4000/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="http://localhost:4000/favicon.png" /> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(http://localhost:4000/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="http://localhost:4000/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="http://localhost:4000/assets/img/logo.png" alt="Road to Coding photo" class="author-photo"> <h4>Road to Coding</h4> <p>只要那一抹笑容尚存, 我便心无旁骛</p> </li> <li><a href="http://localhost:4000/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="mailto:evilcrow486@gmail.com" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-envelope-square"></i> Email</a> </li> <li> <a href="http://github.com/Evil-crow" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul><!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="http://localhost:4000/posts/">All Posts</a></li> <li><a href="http://localhost:4000/tags/">All Tags</a></li> </ul> </li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn" style="background-color:rgba(255,255,255,0.97);"> <div class="content"> <div class="post-title "> <h1>第十一篇 文件的打包压缩与备份</h1> <h4>22 Sep 2017</h4> <a class="btn zoombtn" href="http://localhost:4000/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <p>*最近的重心都放在了Linux_C编程上,也没时间仔细研读<鸟哥的Linux私房菜>*</鸟哥的Linux私房菜></p> <p><em>今天先来总结一下关于文件打包与压缩吧</em></p> <hr /> <p>提起文件的打包与压缩,想必大家都会提起的一个软件就是<strong>WinRAR</strong></p> <p>从接触电脑开始,很经典的一个打包压缩软件,之后还出现了诸如<strong>7Z,2345好压</strong>等一系列的压缩软件</p> <p>那么,在Linux/UNIX平台上,又是如何处理压缩文件的问题呢?</p> <hr /> <h5 id="一关于压缩">一,关于压缩</h5> <p>既然要说打包压缩,那么,首先应该知道为什么需要进行<strong>文件压缩</strong>?</p> <p>现在的计算机硬件发展日新月异,TB已经成为计算机硬盘容量的标配了,</p> <p>你可能会说:怎么会需要压缩呢?<strong>直接放原始文件不就行了?</strong></p> <p><strong>表面上看来,的确是这样.但是,打包压缩在现在的计算机技术应用中还有很重要的作用,一一道来</strong></p> <p>之所以会使用压缩,是因为历史原因,在当年计算机硬件技术落后,</p> <p><strong>磁盘不能很好的起到便携大文件的作用,所以衍生出压缩技术</strong></p> <p>来看看压缩技术的实质:</p> <blockquote> <p>实际上,在我们的计算机中,一个文件所占的空间并不是它是实际的大小,即使在看上去装满了的文件</p> </blockquote> <blockquote> <p>它其中还是有很大一部分得空闲空间的,而压缩技术,就是要把这部分空间挖出来而应运而生的</p> </blockquote> <p>压缩技术,主要分这么两类:</p> <ol> <li>将一个字节中未使用的内容,压缩出来,比如,一个字节记录了数字1,那么,它其他7位都是补0,而压缩技术就是</li> </ol> <p>要把这些0,给收集起来的,至于收集的算法,在这里不予讨论</p> <ol> <li>另一种情况就是将文件中的重复元素记录下来,并进行记录,以使的空间紧凑</li> </ol> <p>至于为什么压缩技术会成功,其中很大一部分原因还是因为有大量的文本文件,而这些文件都是ASCII格式的</p> <p><strong>其中就会有更多得空余空间! ! !</strong></p> <p>举一个最直观的例子:2.6.x版本的内核原始文件300MB左右,压缩后只有60MB,压缩的效率可见一斑</p> <p>说了这么多,那么压缩技术的应用呢?</p> <p>++1. 可以使你的硬盘中存储更多的数据 (虽然现在硬盘已经很大了…)++</p> <p>++2. <strong>在网络数据传输时,文件越小,传输效率越高,宽带利用率越高</strong> ++</p> <hr /> <h5 id="二linux下常见的压缩命令">二,Linux下常见的压缩命令</h5> <p><em>既然压缩技术这么好用,那么我们就来看看如何使用压缩命令吧</em></p> <p>首先来看看,压缩文件常见的扩展名吧!</p> <blockquote> <p>*.z (表示compress压缩的文件)</p> </blockquote> <blockquote> <p>*.gz (gzip程序压缩出来的文件)</p> </blockquote> <blockquote> <p>*.bz2 (bzip2压缩的文件)</p> </blockquote> <blockquote> <p>*.tar tar打包的文件(并非压缩文件)</p> </blockquote> <blockquote> <p>*tar.gz (tar打包后,使用gzip压缩的文件)</p> </blockquote> <blockquote> <p>*tar.bz2 (tar打包后,使用bzip2压缩的文件)</p> </blockquote> <p>还是和之前介绍的一样,</p> <p><strong>在Linux系统中,文件的扩展名可有可无,但是为了使用方便,加上扩展名以便于区分文件</strong></p> <p><del>Compress,此命令已经十分久远,而且其压缩效率也很不堪,此处不予详解</del></p> <p>下面来详解,gzip与bzip2两个常用的压缩命令</p> <p><strong>1.gzip</strong></p> <p>上面提到了,Compress已经不常用了,而gzip便是Compress的替代品</p> <p>先来看几个常用的参数</p> <blockquote> <p>-c 将结束输出到屏幕上,可以之后使用重定向</p> </blockquote> <blockquote> <p>-d 解压缩的参数</p> </blockquote> <blockquote> <p>-t 用来检验文件的一致性</p> </blockquote> <blockquote> <p>-v 显示一些进行压缩时的信息,如压缩比之类的</p> </blockquote> <blockquote> <p>-#,压缩等级有1-9 九级,用速度换压缩效果,数字越大,速度越慢</p> </blockquote> <p>结合上面命令便是</p> <p><code class="highlighter-rouge">压缩命令 gzip -ctv file</code></p> <p><code class="highlighter-rouge">解压命令 gzip -d file</code></p> <p>而且,对于gzip压缩产生的文件,*.gz,可以直接使用命令 zcat进行不解压查看文件</p> <p><strong>2.bzip2</strong></p> <p>如果说上面gzip时为了取代Compress而产生的,那么bzip2就是为了取代gzip而产生的</p> <p><strong>重要的一点,bzip2的压缩效率比gzip提高了许多</strong></p> <p>bzip2的参数基本上与gzip是相同的,来看一些不同的参数</p> <blockquote> <p>-k,保留源文件,而不会删除原始的文件</p> </blockquote> <blockquote> <p>-z,压缩的参数</p> </blockquote> <p>同时,同gzip类似的是<strong>通过bzcat命令,也可以读出bzip2压缩的文件</strong></p> <p><strong>重要的第二点,兼容关系 bzip2 &gt; gzip &gt; Compress</strong></p> <p><strong>3.tar 打包命令</strong></p> <p>可能你会奇怪,为什么我没有用截图来演示压缩命令的用法</p> <p>等你看完tar打包命令就知道为什么了,</p> <p>++细心一点你可能会发现,上面的三个命令都是对于单文件进行压缩的++</p> <p>++实际上他们也可以对多文件压缩,但是,压缩出来的结果,5个源文件压缩成为5个压缩文件++</p> <p>++实际上没有实际意义,基本是废掉了++</p> <p>++所以,就要使用我们现在最常用的tar打包命令++</p> <p>++<strong>何为打包,即为将多个文件进行打包成为一个大文件</strong>++</p> <p><strong>而这样也就满足了我们将多个文件进行压缩成为一个大的压缩文件的需求</strong></p> <p>来看一看tar的常用参数:</p> <blockquote> <p>-c 新建打包文件,搭配-V显示过程中被打包的文件名</p> </blockquote> <blockquote> <p>-t 查看打包文件中含有哪些文件</p> </blockquote> <blockquote> <p>-x 解压缩火或者解打包的参数</p> </blockquote> <blockquote> <p>-j 通过bzip2的压缩方式进行处理打包文件</p> </blockquote> <blockquote> <p>-z 通过gzip的压缩方式处理打包文件</p> </blockquote> <blockquote> <p>-v 在压缩的过程中将处理的文件名显示出来</p> </blockquote> <blockquote> <p>-f 表示要处理的文件名</p> </blockquote> <blockquote> <p>-C 表示解压操作要处理的目录</p> </blockquote> <p>乍看之下,的确是十分复杂,所以我们抽丝剥茧,跳出其中最常用的关键内容:</p> <p><strong>以下默认使用bzip2处理,也可以使用gzip</strong></p> <p><strong>1.处理压缩命令 tar -jcv -f 目标文件 源文件</strong></p> <p><strong>2.处理解压命令 tar -jxv -f 目标文件 -C 想要解压的目录</strong></p> <p><strong>3.查看压缩文件 tar -jtv -f 目标文件</strong></p> <p>以上即为常用的tar操作,其他的用法自行搜索</p> <p><strong>这里要强调一点,即使是在以后使用命令的时候也是十分有用的</strong></p> <p><strong>即,在进行-f -C这些选项的使用时,需要十分注意,选项的顺序问题,理论上,选项的顺序与命令的执行是无关的</strong></p> <p><strong>但是,选项后跟的参数就很关键了,-jcv -f 与 -jcfv都是可以的,但是,-f后,v也称为了文件名的一部分</strong></p> <p><strong>这就会造成很大的问题了,所以,需要谨慎的处理这些问题</strong></p> <p>下面简单说说几个tar的有趣操作</p> <p>1.打包,但并不包含,</p> <p>有的时候,你想要打包整个目录的文件,但是又不想包括其中的一些文件,怎么办呢?</p> <p>–exclude=FILE就是一个十分好的办法</p> <p>e.g. <code class="highlighter-rouge">tar -jcv -f filename.tar.bz2 /root --exclude=root*</code></p> <p>2.以时间为参数进行文件的区别并打包</p> <p><code class="highlighter-rouge">tar -jcv -f failname.tar.bz2 --newer-mtime="2008/02/12" 源文件</code></p> <p>使用 –newer-mtime 参数对于处理这样的问题十分方便</p> <hr /> <h5 id="三文件的备份工具">三,文件的备份工具</h5> <p>因为,我对此处没有深入区分析,所以不好对此进行详解,仅提供命令,有兴趣的读者可以去尝试</p> <p>1.文件备份工具:dump</p> <p>2.恢复备份:restore</p> <p>3.新建镜像文件:mkisofs</p> <p>4.光盘刻录工具:cdrecord</p> <p>5.制作大文件:dd</p> <p>6.万能的备份工具:cpio</p> <hr /> <h5 id="vim的操作与使用">Vim的操作与使用</h5> <p><strong>这一章本来是独立的,但是我不准备进行细讲,因为,Vim讲的话无非就是命令的使用</strong></p> <p><strong>在此处推荐三个三个东西</strong></p> <p><strong>1.我自己在用的Vim配置文件</strong></p> <p><a href="https://github.com/spf13/spf13-vim">spf13</a>(我觉得是与spaceemacs同级别的怪兽)</p> <p><strong>2.小组很多人也在用的配置文件(从网上的足迹来看应该是某位小组的学长写的)</strong></p> <p><a href="https://github.com/ma6174/vim">ma6174/vim</a></p> <p><strong>3.推荐一本书吧</strong></p> <p><a href="http://www.oreilly.com.cn/index.php?func=book&amp;isbn=978-7-5641-2604-9">学习vi和vim编辑器</a> O’reilly出品,必属精品</p> <p><strong>Vim的学习是一个长久的过程,用的越多,会的越快也越熟练</strong></p> <p><strong>所以,平时多多使用Vim吧,Vim会让你沉迷Conding的</strong></p> <p>August 3, 2017 10:18 AM</p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="http://localhost:4000/tags/#vbird" title="Pages tagged vbird" class="tag"><span class="term">vbird</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/file-compress-archive/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/file-compress-archive/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=http://localhost:4000/file-compress-archive/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="http://localhost:4000/assets/js/jquery-1.12.0.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.dlmenu.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.goup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.magnific-popup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.fitvid.min.js"></script> <script src="http://localhost:4000/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'Evilcrow'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
