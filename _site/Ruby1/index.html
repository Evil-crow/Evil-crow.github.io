<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/github.min.css"> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script> <script>hljs.initHighlightingOnLoad();</script> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>Ruby学习笔记(一) &#8211; Road to Coding</title> <meta name="description" content="只要那一抹笑容尚存, 我便心无旁骛"> <meta name="keywords" content="Ruby"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="http://localhost:4000/assets/img/logo.png"> <meta name="twitter:title" content="Ruby学习笔记(一)"> <meta name="twitter:description" content="以前写过Ruby博客,不过那时候写的有点ZZ,现在重拾Ruby,写点有意思的吧"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Ruby学习笔记(一)"> <meta property="og:description" content="以前写过Ruby博客,不过那时候写的有点ZZ,现在重拾Ruby,写点有意思的吧"> <meta property="og:url" content="http://localhost:4000/Ruby1/"> <meta property="og:site_name" content="Road to Coding"> <meta property="og:image" content="http://localhost:4000/assets/img/logo.png"> <link rel="canonical" href="http://localhost:4000/Ruby1/"> <link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Road to Coding Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css"> <!-- JS --> <script src="http://localhost:4000/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="http://localhost:4000/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="http://localhost:4000/favicon.png" /> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(http://localhost:4000/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="http://localhost:4000/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="http://localhost:4000/assets/img/logo.png" alt="Road to Coding photo" class="author-photo"> <h4>Road to Coding</h4> <p>只要那一抹笑容尚存, 我便心无旁骛</p> </li> <li><a href="http://localhost:4000/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="mailto:evilcrow486@gmail.com" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-envelope-square"></i> Email</a> </li> <li> <a href="http://github.com/Evil-crow" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul><!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="http://localhost:4000/posts/">All Posts</a></li> <li><a href="http://localhost:4000/tags/">All Tags</a></li> </ul> </li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn" style="background-color:rgba(255,255,255,0.97);"> <div class="content"> <div class="post-title "> <h1>Ruby学习笔记(一)</h1> <h4>01 Feb 2018</h4> <a class="btn zoombtn" href="http://localhost:4000/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <p>[TOC] <em>之前写博客太作逼了,说到底,博客还是给自己看的,所以,以后的博客可能不是那么的说人话</em></p> <h2 id="一-杂项">一. 杂项</h2> <ol> <li> <p>Ruby中可以子符串中获取到变量的值,不同于C中的”%”控制符,也不同于VimScript中的${}</p> <p><strong>Ruby中使用的是#{var},在子符串中获取到变量的值</strong></p> </li> <li>调用类时,需要写类名,当然也可以 <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kp">include</span> <span class="no">Math</span>
</code></pre></div> </div> <p>之后就可以随便使用Math中的方法</p> </li> <li> <p>“string”,会进行转义, ‘string’不会进行转义</p> </li> <li> <p>Ruby中的数组是动态数组,会自动根据需求调整数组大小,所以要写具有Ruby风格的数组操作代码</p> <p>比如</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">array</span> <span class="o">=</span> <span class="p">[]</span>
 <span class="n">array</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
 <span class="nb">p</span> <span class="n">array</span> <span class="c1">#=&gt; [nil, nil, 3]</span>
 <span class="nb">p</span> <span class="n">array</span><span class="p">.</span><span class="nf">szie</span> <span class="c1">#=&gt; 3</span>
</code></pre></div> </div> <p>总之,在符合标准的条件下,自由进行代码组织,Ruby是非常灵活的,给”人”写的语言</p> </li> <li> <p>散列的两种组织方法</p> <p>由于散利的键一般是符号/字符串,我们倾向于使用符号,<strong>因为只是判断相等与否,符号的开销小</strong></p> <p>那么,就有两种散利的创建方法,一种是转换为符号(符号化),一种是直接操作符号</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">hash</span> <span class="o">=</span> <span class="p">{</span><span class="ss">:foo</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span> <span class="ss">:soo</span> <span class="o">=&gt;</span> <span class="s2">"2"</span><span class="p">}</span>
 <span class="n">hash_test</span> <span class="o">=</span> <span class="p">{</span><span class="ss">foo: </span><span class="s2">"1"</span><span class="p">,</span> <span class="ss">soo: </span><span class="s2">"2"</span><span class="p">}</span>
</code></pre></div> </div> </li> <li> <p>正则表达式的用法</p> <p>既然是脚本语言,那么正则的使用是必不可少的,Ruby使用正则时是这样的</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="sr">/pattern/</span> <span class="o">=~</span> <span class="n">string</span>
</code></pre></div> </div> <p>就是这样进行匹配的,其中的pattern为模式串,即常写的正则表达式</p> </li> <li> <p>从命令行获取输入使用的是预定义数组(伪变量),切记,<strong>ARGV[x]中取出的是字符串,需要to_?方法</strong></p> </li> <li>区分<strong>类</strong>与<strong>库</strong>,刚接触,还混淆过,require用来引用库,就像include之于C一般</li> </ol> <h2 id="二-对象变量常量">二, 对象,变量,常量</h2> <p>来捋一捋概念:</p> <p><strong>Ruby中数据的基本单位是对象,对象有很多种</strong></p> <p><strong>对象的特征,可以进行的操作,全部由类进行封装,</strong></p> <p><strong>实例就是对象,实例的说法是对类而言的,类就像是一类东西,实例就是其中一个具象的表达,即为对象</strong></p> <p><strong>所以,在Ruby中,实例即为对象</strong></p> <p><strong>另外,还有容器这个名词,那么,什么是容器,array,hash就是容器,因为他们是存放对象的对象</strong></p> <h3 id="1-变量的类型">1. 变量的类型</h3> <p>Ruby也不复杂,变量类型就四种:</p> <p><strong>局部变量(英语字母或_开头),全局变量($),实例变量(@),类变量(@@)</strong></p> <p>另外,注意伪变量,<strong>false, true, ARGV, nil</strong>,这些即使赋值了,值也不会改变的</p> <p><strong>同其他编程语言(C),变量未经初始化,不能进行使用,会抛出异常</strong></p> <h3 id="2-常量">2. 常量</h3> <p>常量要注意两点:</p> <p><strong>&lt;1&gt;.常量不能重复赋值,会抛异常</strong></p> <p><strong>&lt;2&gt;.Ruby中的常量都是大写字母</strong></p> <h3 id="3-灵活的使用多重赋值">3. 灵活的使用多重赋值</h3> <h3 id="4-变量的命名方法">4. 变量的命名方法</h3> <p>简单地来说,就三点:</p> <p><strong>&lt;1&gt;.使用含义清晰,不冗杂的命名</strong></p> <p><strong>&lt;2&gt;.变量和方法使用下划线命名法</strong></p> <p><strong>&lt;3&gt;.类名和模块名使用驼峰命名法</strong></p> <h2 id="三-条件判断">三, 条件判断</h2> <p>条件判断,其中重要的是:<strong>Ruby中何为真假值</strong></p> <table> <thead> <tr> <th>真假</th> <th>类型</th> </tr> </thead> <tbody> <tr> <td>真</td> <td>false/nil以外所有值</td> </tr> <tr> <td>假</td> <td>fasle, nil</td> </tr> </tbody> </table> <p><strong>从C转过来的,要十分注意这里</strong></p> <p>语句,看一下下面的例子就懂了</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">condition</span> <span class="k">then</span>
  <span class="k">do</span> <span class="n">something</span>
<span class="k">elsif</span> <span class="n">condtion</span> <span class="k">then</span>
  <span class="k">do</span> <span class="n">something</span>
<span class="k">else</span>
  <span class="k">do</span> <span class="n">something</span>
<span class="k">end</span>
</code></pre></div></div> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">unless</span> <span class="n">condtion</span> <span class="k">then</span>
  <span class="k">do</span> <span class="n">something</span>
<span class="k">else</span>
  <span class="k">do</span> <span class="n">something</span>
<span class="k">end</span>
</code></pre></div></div> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="n">object</span> <span class="k">then</span>
<span class="k">when</span> <span class="n">value1</span> <span class="k">then</span>
  <span class="k">do</span> <span class="n">something</span>
<span class="k">when</span> <span class="n">value2</span> <span class="k">then</span>
  <span class="k">do</span> <span class="n">something</span>
<span class="k">else</span>
  <span class="k">do</span> <span class="n">something</span>
<span class="k">end</span>
</code></pre></div></div> <p>ruby的条件判断就上面三种语句,</p> <p><strong>从静态语言到脚本语言,是有点不适应,语法太过于灵活自由</strong></p> <p><strong>方法调用,可以不给参数加括号,</strong></p> <p><strong>上面三种于语句的条件(condtion)都不需要括号,同时then也都也可以省略</strong></p> <p><strong>但是,虽然语法自由,要写出自己的风格</strong></p> <p>既然语法自由,所以,可以将if/unless作为修饰符</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">puts</span> <span class="s2">"a &gt; b"</span> <span class="k">if</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span>
<span class="nb">puts</span> <span class="s2">"a &gt; b"</span> <span class="k">unless</span> <span class="n">a</span> <span class="o">&lt;=</span> <span class="n">b</span>
</code></pre></div></div> <p>语句处理比较简单地时候,可以这样写,写得更加优雅,而不是在if ~ then ~ end 块中就只有一条语句</p> <h3 id="2-聊聊对象的同一性">2. 聊聊对象的同一性</h3> <p>既然Ruby中数据的基本单位是对象,那么,如何区分看上去相同的对象呢?</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">str1</span> <span class="o">=</span> <span class="s2">"hello"</span>
<span class="n">str2</span> <span class="o">=</span> <span class="s2">"hello"</span>

<span class="n">str1</span> <span class="o">==</span> <span class="n">str2</span> <span class="p">?</span> <span class="p">?</span> <span class="p">?</span>
</code></pre></div></div> <p>上面使用”==”不太恰当,是为了说是否相等</p> <p>答案是:<strong>值相等,但并非是同一对象</strong></p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">p</span> <span class="n">str1</span><span class="p">.</span><span class="nf">object_id</span> <span class="c1">#=&gt; 10476400</span>
<span class="nb">p</span> <span class="n">str2</span><span class="p">.</span><span class="nf">object_id</span> <span class="c1">#=&gt; 10437580</span>
</code></pre></div></div> <p>很显然,并不相同</p> <p>所以我们,可以使用方法来进行判断,下面提到两个极易混淆的方法</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">str1</span><span class="p">.</span><span class="nf">equal?</span><span class="p">(</span><span class="n">str2</span><span class="p">)</span> <span class="c1">#=&gt; false    检查是否为同一对象</span>
<span class="n">str1</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span><span class="n">str2</span><span class="p">)</span> <span class="c1">#=&gt; true       检查是否相等</span>
</code></pre></div></div> <p>但是,eql?方法,进行检查是否相等时,内部实现,相对于 == 更为严谨</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">1</span><span class="p">.</span><span class="nf">eql?</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="c1">#=&gt; false</span>
<span class="nb">p</span> <span class="mi">1</span> <span class="o">==</span> <span class="mf">1.0</span> <span class="c1">#=&gt; true</span>
</code></pre></div></div> <p>尤其是在散列值得获取时,要十分注意,散列的内部实现是eql?方法</p> <p><strong>同时,我们自己在构建方法,是,也要遵守返回值为真假时,以?结尾的方法名</strong></p> <h3 id="3-nil是什么">3, nil是什么</h3> <p>之前说过,Ruby中真假值的判断与C有所不同,C中,NULL是什么?</p> <p><strong>NULL指空指针,实际上是啥?</strong></p> <p><strong>就是这个,(void *)0</strong></p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define NULL (void *)0
</span></code></pre></div></div> <p>所以,NULL可以所谓假的判断条件,</p> <p><strong>而nil指的是对象不存在,这样一想,所以nil也可以作为假的判断条件</strong></p> <h2 id="四-循环控制">四, 循环控制</h2> <p><strong>循环的部分,有着这些注意的</strong></p> <p>for语句的用法</p> <p>与C中稍有不同</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">var</span> <span class="k">in</span> <span class="n">object</span> <span class="k">do</span>
  <span class="kp">loop</span> <span class="n">something</span>
<span class="k">end</span>

<span class="err">这个对象还可以是</span><span class="p">,</span><span class="err">动态生成的</span><span class="p">(</span><span class="n">x</span><span class="o">..</span><span class="n">y</span><span class="p">)</span>
</code></pre></div></div> <p>来看看Ruby中循环控制符</p> <table> <thead> <tr> <th>控制符</th> <th>作用</th> </tr> </thead> <tbody> <tr> <td>break</td> <td>跳出循环</td> </tr> <tr> <td>next</td> <td>结束此次循环,进入下次,类似于continue</td> </tr> <tr> <td>redo</td> <td>重复上一次的行为</td> </tr> </tbody> </table> <p>关于redo:</p> <p><strong>这是一个比较神油的关键字,看下面这个例子</strong></p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">name</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Ruby"</span><span class="p">,</span> <span class="s2">"Python"</span><span class="p">,</span> <span class="s2">"C++"</span><span class="p">,</span> <span class="s2">"Java"</span><span class="p">]</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="nb">name</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">lang</span><span class="o">|</span>
  <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">redo</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">2</span>
  <span class="nb">print</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">lang</span><span class="p">],</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span>
<span class="k">end</span>

<span class="c1">#=&gt; </span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"Ruby"</span><span class="p">]</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s2">"Python"</span><span class="p">]</span>
<span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s2">"C++"</span><span class="p">]</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s2">"Java"</span><span class="p">]</span>
</code></pre></div></div> <p><strong>当 i == 2 时,执行redo</strong></p> <p>程序回到这个块首,重新执行</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></div> <p>因此,才能跳出循环,否则会变成死循环</p> <p><strong>一般情况下,ruby仅提供此关键词,即使是Ruby类库中,一般也不会用到此关键字</strong></p> <p><strong>一般,break, next便可以处理大部分情况,即使要用redo,也要十分谨慎</strong></p> <p>来看看循环语句的区分,毕竟ruby<strong>提供了6方式来进行循环</strong></p> <table> <thead> <tr> <th>不同方式</th> <th>主要用途</th> </tr> </thead> <tbody> <tr> <td>times 方法</td> <td>确定循环次数时使用</td> </tr> <tr> <td>for 语句</td> <td>从对象中取出元素时使用(each的语法糖)</td> </tr> <tr> <td>while 语句</td> <td>自由制定循环条件时</td> </tr> <tr> <td>until 语句</td> <td>while比较难懂时,反其道行之</td> </tr> <tr> <td>each 方法</td> <td>从对象中取出元素时使用</td> </tr> <tr> <td>loop 方法</td> <td>不限制循环次数时使用</td> </tr> </tbody> </table> <p><strong>到这里,糖多的语言,写的是真的舒服</strong></p> <p><strong>for的内部实现,就是使用each方法</strong></p> <h2 id="五-do--end-与--">五, do ~ end 与{ ~ }</h2> <p>这是两种块的写法,</p> <p>我们通常有以下的约定:</p> <p><strong>&lt;1&gt;. 程序跨行时,使用do ~ end的写法</strong></p> <p><strong>&lt;2&gt;. 程序在一行时,使用{ ~ }的写法</strong></p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">10</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">i</span>
<span class="k">end</span>

<span class="c1">#=&gt; 10.times {|i| puts i}</span>
</code></pre></div></div> <p>这些都是些基础内容,下一次就是些OOP的知识了</p> <p>让我吹一句,<strong>人中之龙天下第一 (滑稽)</strong></p> <p>February 1, 2018 9:41 PM</p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="http://localhost:4000/tags/#Ruby" title="Pages tagged Ruby" class="tag"><span class="term">Ruby</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/Ruby1/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/Ruby1/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=http://localhost:4000/Ruby1/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="http://localhost:4000/assets/js/jquery-1.12.0.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.dlmenu.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.goup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.magnific-popup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.fitvid.min.js"></script> <script src="http://localhost:4000/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'Evilcrow'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
